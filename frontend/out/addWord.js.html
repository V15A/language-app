<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: addWord.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: addWord.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from "react";
import { Button, TextField } from "@mui/material";

/**
 * A component that returns 3 textfields and submit button to add new words to db.
 *
 * @returns
 */
function AddWord() {
  const [finnish, setFinnish] = useState("");
  const [english, setEnglish] = useState("");
  const [tag, setTag] = useState("");
  const [isSending, setIsSending] = useState(false);
  const [disabled, setDisabled] = useState(true);

  useEffect(() => {
    /**
     * A function to enable and disable submit button depending on the content of @tag @finnish and @english
     */
    const submitConditions = () => {
      if (
        tag.trim().length > 1 &amp;&amp;
        tag.trim().match(/^[a-zA-Z/]+$/) &amp;&amp;
        finnish.trim().length > 1 &amp;&amp;
        finnish.trim().match(/^[a-zA-ZÀ-ÖØ-öø-ÿ]+$/) &amp;&amp;
        english.trim().length > 1 &amp;&amp;
        english.trim().match(/^[a-zA-Z]+$/)
      ) {
        setDisabled(false);
      } else {
        setDisabled(true);
      }
    };

    submitConditions();

    return;
  }, [finnish, english, tag]);

  const handleFinChange = (event) => {
    setFinnish(event.target.value);
  };

  const handleEngChange = (event) => {
    setEnglish(event.target.value);
  };

  const handleTagChange = (event) => {
    setTag(event.target.value);
  };

  /**
   * Async function that posts wordpair with tag to database.
   */
  const add = async () => {
    const conf = {
      method: "POST",
      headers: { "Content-type": "application/json" },
      body: JSON.stringify({ english, finnish, tag }),
    };
    console.log(conf);
    try {
      setIsSending(true);
      let res = await fetch("/words/add", conf);
      console.log(res);
      setIsSending(false);
    } catch (err) {
      setIsSending(false);
      console.log("err.message");
    }
  };

  if (isSending) {
    return (
      &lt;div>
        &lt;h2>Sending...&lt;/h2>
      &lt;/div>
    );
  } else {
    return (
      &lt;div>
        &lt;TextField
          id="outlined-basic"
          label="Finnish"
          variant="outlined"
          onChange={handleFinChange}
        />
        &lt;br />
        &lt;TextField
          id="outlined-basic"
          label="English"
          variant="outlined"
          sx={{ marginTop: "7px" }}
          onChange={handleEngChange}
        />
        &lt;br />
        &lt;TextField
          id="outlined-basic"
          label="Tag"
          variant="outlined"
          sx={{ marginTop: "7px" }}
          onChange={handleTagChange}
        />
        &lt;br />
        &lt;Button
          disabled={disabled}
          variant="contained"
          sx={{ marginTop: "7px" }}
          onClick={add}
        >
          Add Word
        &lt;/Button>
      &lt;/div>
    );
  }
}

export default AddWord;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AddWord">AddWord</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Jan 15 2022 04:33:58 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
